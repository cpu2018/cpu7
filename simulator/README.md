# シミュレータ

## 概要

gcc -o simulator simu.c finv1.c finv2.c fsqrt\_table.c fsqrtinv\_table.c
でコンパイル。

gcc -o assembler as.c
でコンパイル

### 使い方。
- ./assembler ファイル.s
この時出力される命令とアドレスの対応をあとで使うので別のファイルにうつしといた方が良いかも

- ./assembler \[ファイル.s\] > \[test.txt\]

- ./simulator \[実行ファイル(上でできたバイナリ)\] \[(ファイル2).bin\] \[(ファイル3).ppm\]

.binが入力ファイル。
.ppmが出力ファイル。

最初にブレークするアドレスを聞かれるので、止めたいアドレスがあれば入力。なければ負の数を入れて欲しい。(止めたいアドレスはアセンブラででた対応表を見て欲しい)

しばらく自動実行。もしループしたりしていて途中で止めたいと思った時はCtrl-Zでシグナルを送れば止まる。そこから一命令ずつ実行。

ブレークするアドレスにたどり着いたらそこから1命令ずつ実行。

毎回cpuのレジスタの状態を表示するか確認。
表示するなら1
しないなら0

再び自動実行をするか聞かれる。
自動実行するなら0
しないなら1

上と逆なので注意。ずっと1命令で実行して、レジスタの表示をしたいときは1を連打してくれれば良い。

### Makefile の使い方

- make
	makeをすると、sldコンバータ、アセンブラ、シミュレータがコンパイルされ、Makefile の ML\_TESTSに書いてある名前(記述する際は拡張子はいらない)の.mlファイルが全てバイナリに変換されます。また、ASM\_TESTSに書いてある名前の.sファイルが全てバイナリに変換されます。

- make do\_casm
	ML\_TESTにある.mlファイルをバイナリにコンパイルします。

- make do\_asm
	ASM\_TESTSにあるアセンブリファイルをバイナリにコンパイルします。

- make rma
	サンプルコードのアセンブリが全て削除される

- make rmb
	サンプルコードのバイナリが全て削除される

- make rm
	アセンブリファイル、バイナリファイルが全て削除されます。

- make clean
	sldコンバータ、シミュレータ、アセンブラの実行ファイルも含めて削除されます。


## サンプルコード

- passedに入っているものは合格
- unpassedに入っているものは不合格または未検査

## 備考
